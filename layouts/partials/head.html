<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ if .Title }}{{ .Title }} - {{ end }}{{ .Site.Title }}</title>

{{/* SEO and social sharing meta tags */}}
{{ partial "seo.html" . }}

<!-- Theme detection - MUST run before CSS to prevent flash -->
<script>
(function() {
    var theme = localStorage.getItem('theme');
    if (theme === 'night' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('night');
    }
})();
</script>

<!-- Preload background images -->
<link rel="preload" href="/background/3.png" as="image">
<link rel="preload" href="/background/3_night.png" as="image">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Spectral:wght@400;600&family=Uncial+Antiqua&display=swap" rel="stylesheet">

<!-- Theme CSS -->
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/chaos.css">
<link rel="stylesheet" href="/css/achievements.css">
<link rel="stylesheet" href="/css/sierra-panel.css">

<!-- Custom CSS from micro.blog -->
{{ partial "custom_css.html" . }}

<!-- IndieWeb endpoints -->
<link rel="authorization_endpoint" href="https://micro.blog/indieauth/auth">
<link rel="token_endpoint" href="https://micro.blog/indieauth/token">
<link rel="micropub" href="https://micro.blog/micropub">
<link rel="webmention" href="https://micro.blog/webmention">
<link rel="microsub" href="https://micro.blog/microsub">

<!-- Social identity links -->
{{ with .Site.Params.twitter }}<link rel="me" href="https://twitter.com/{{ . }}">{{ end }}
{{ with .Site.Params.github }}<link rel="me" href="https://github.com/{{ . }}">{{ end }}
{{ with .Site.Params.instagram }}<link rel="me" href="https://instagram.com/{{ . }}">{{ end }}

<!-- RSS Feed -->
<link rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" href="{{ .Site.BaseURL }}feed.xml">
<link rel="alternate" type="application/json" title="{{ .Site.Title }}" href="{{ .Site.BaseURL }}feed.json">

<!-- Plugin head HTML -->
{{ partial "plugin_head_html.html" . }}
{{ partial "plugin_css.html" . }}
