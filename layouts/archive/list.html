{{/* ABOUTME: Template for micro.blog's built-in archive section */}}
{{/* ABOUTME: Lists blog posts chronologically grouped by year */}}
{{ define "main" }}
<div class="archive-container">
    {{ $years := .Pages.GroupByDate "2006" }}

    {{ range $years }}
    <section class="archive-year">
        <h2 class="year-header">{{ .Key }}</h2>
        <ul class="archive-list">
            {{ range .Pages }}
            <li class="archive-entry {{ partial "category-class.html" . }}">
                {{ partial "post-sprite.html" (dict "Params" .Params "isArchive" true) }}

                <span class="archive-date">{{ .Date.Format "Jan 02" }}</span>
                <a href="{{ .Permalink }}" class="archive-title">
                    {{ if .Title }}{{ .Title }}{{ else }}{{ .Content | plainify | truncate 50 }}{{ end }}
                </a>
                {{ with .Params.categories }}
                    {{ range first 1 . }}
                    <a href="/categories/{{ . | urlize }}/" class="archive-tag">{{ . }}</a>
                    {{ end }}
                {{ end }}
            </li>
            {{ end }}
        </ul>
    </section>
    {{ end }}
</div>
{{ end }}
