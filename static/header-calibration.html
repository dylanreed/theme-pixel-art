<!DOCTYPE html>
<!-- ABOUTME: Header area calibration tool for adjusting header styling per theme -->
<!-- ABOUTME: Adjust header height, site title, nav signs, and colors with live preview and CSS output -->
<html>
<head>
    <title>Header CSS Calibration</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Uncial+Antiqua&family=MedievalSharp&family=Orbitron:wght@400;700&family=Share+Tech+Mono&family=Teko:wght@400;600&family=Rajdhani:wght@500;600&family=Amatic+SC:wght@700&family=Cabin:wght@400;500&family=Cinzel:wght@400;600&family=Quicksand:wght@400;500&family=Fredericka+the+Great&family=IM+Fell+English&family=Vollkorn:wght@400;500&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: monospace;
            background: #1a1a2e;
            color: #eee;
            padding: 20px;
            margin: 0;
        }
        h1 { text-align: center; color: #0ff; margin-bottom: 10px; }
        .subtitle { text-align: center; color: #888; margin-bottom: 20px; }

        .layout {
            display: flex;
            gap: 20px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .controls-panel {
            flex: 0 0 380px;
            background: #2a2a4e;
            padding: 15px;
            border-radius: 8px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .control-section {
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid #444;
        }

        .control-section h3 {
            margin: 0 0 8px 0;
            color: #0ff;
            font-size: 13px;
        }

        .control-row {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
            gap: 8px;
        }

        .control-row label {
            flex: 0 0 80px;
            color: #aaa;
            font-size: 11px;
        }

        .control-row input[type="range"] {
            flex: 1;
            height: 16px;
        }

        .control-row .value {
            flex: 0 0 60px;
            color: #ff0;
            text-align: right;
            font-size: 11px;
        }

        .control-row input[type="color"] {
            width: 40px;
            height: 24px;
            border: none;
            cursor: pointer;
        }

        .control-row input[type="text"] {
            flex: 1;
            background: #1a1a2e;
            color: #eee;
            border: 1px solid #444;
            padding: 4px 8px;
            font-family: monospace;
            font-size: 11px;
        }

        select {
            width: 100%;
            padding: 8px;
            font-size: 14px;
            margin-bottom: 8px;
            background: #1a1a2e;
            color: #eee;
            border: 1px solid #444;
        }

        .selectors {
            display: flex;
            gap: 10px;
        }
        .selectors > div { flex: 1; }

        .preview-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .preview-container {
            background: #2a2a4e;
            padding: 20px;
            border-radius: 8px;
            overflow: hidden;
        }

        /* Preview header styles */
        .preview-header {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
        }

        .preview-header-image {
            width: 100%;
            background-size: cover;
            background-position: center;
            image-rendering: pixelated;
            position: relative;
            margin: 0 auto;
        }

        .preview-header-frame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: 100% 100%;
            image-rendering: pixelated;
            pointer-events: none;
        }

        .preview-site-title {
            position: absolute;
            z-index: 1;
        }

        .preview-site-title a {
            text-decoration: none;
        }

        .preview-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .preview-nav-sign {
            display: flex;
            align-items: center;
            justify-content: center;
            background-size: 100% 100%;
            image-rendering: pixelated;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .preview-nav-sign:hover {
            transform: rotate(-4deg) translateY(-3px);
        }

        .preview-nav-sign.active {
            transform: translateY(15px);
        }

        .output {
            background: #000;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .output h3 {
            color: #0ff;
            margin: 0 0 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .output pre {
            background: #1a1a2e;
            padding: 10px;
            overflow-x: auto;
            color: #0f0;
            font-size: 10px;
            max-height: 250px;
            overflow-y: auto;
            margin: 0;
        }

        .btn-row {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .copy-btn, .export-btn, .reset-btn {
            background: #0ff;
            color: #000;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
            font-family: monospace;
            font-size: 12px;
        }

        .copy-btn:hover, .export-btn:hover, .reset-btn:hover {
            background: #0f0;
        }

        .export-btn {
            background: #f0f;
        }

        .reset-btn {
            background: #f90;
        }

        .quick-actions {
            display: flex;
            gap: 5px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .quick-btn {
            flex: 1;
            min-width: 80px;
            padding: 4px;
            font-size: 9px;
            cursor: pointer;
            background: #333;
            border: 1px solid #555;
            color: #aaa;
        }

        .quick-btn:hover {
            background: #444;
            color: #fff;
        }

        .color-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .color-group label {
            flex: 0 0 60px;
        }

        .tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 10px;
        }

        .tab {
            padding: 6px 12px;
            font-size: 11px;
            cursor: pointer;
            background: #1a1a2e;
            border: 1px solid #444;
            color: #888;
        }

        .tab.active {
            background: #0ff;
            color: #000;
            border-color: #0ff;
        }

        .subsection {
            background: rgba(0,0,0,0.2);
            padding: 10px;
            border-radius: 4px;
            margin-top: 8px;
        }

        .subsection h4 {
            margin: 0 0 8px 0;
            color: #888;
            font-size: 11px;
        }
    </style>
</head>
<body>
    <h1>Header CSS Calibration</h1>
    <p class="subtitle">Adjust header styles per theme - header image, site title, nav signs</p>

    <div class="layout">
        <div class="controls-panel">
            <div class="control-section">
                <div class="selectors">
                    <div>
                        <h3>Theme</h3>
                        <select id="themeSelect">
                            <option value="fantasy">Fantasy (default)</option>
                            <option value="sci-fi">Sci-Fi</option>
                            <option value="cyberpunk">Cyberpunk</option>
                            <option value="cabin">Cabin</option>
                            <option value="underwater">Underwater</option>
                            <option value="corporate">Corporate (Easy Read)</option>
                        </select>
                    </div>
                    <div>
                        <h3>Mode</h3>
                        <select id="modeSelect">
                            <option value="day">Day</option>
                            <option value="night">Night</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="control-section">
                <h3>Header Image</h3>
                <div class="control-row">
                    <label>Width:</label>
                    <input type="range" id="header-width" min="50" max="100" value="100" step="1">
                    <span class="value" id="header-width-val">100%</span>
                </div>
                <div class="control-row">
                    <label>Height:</label>
                    <input type="range" id="header-height" min="150" max="400" value="215" step="5">
                    <span class="value" id="header-height-val">215px</span>
                </div>
                <div class="control-row">
                    <label>Box Shadow:</label>
                    <input type="text" id="header-shadow" value="0 4px 20px rgba(0, 0, 0, 0.3)">
                </div>
            </div>

            <div class="control-section">
                <h3>Site Title</h3>
                <div class="control-row">
                    <label>Font Size:</label>
                    <input type="range" id="title-size" min="20" max="60" value="37" step="1">
                    <span class="value" id="title-size-val">37px</span>
                </div>
                <div class="control-row">
                    <label>Bottom:</label>
                    <input type="range" id="title-bottom" min="0" max="150" value="0" step="1">
                    <span class="value" id="title-bottom-val">0px</span>
                </div>
                <div class="control-row">
                    <label>Left:</label>
                    <input type="range" id="title-left" min="0" max="300" value="65" step="5">
                    <span class="value" id="title-left-val">65px</span>
                </div>
                <div class="control-row">
                    <label>Color:</label>
                    <input type="color" id="title-color" value="#f5e6d3">
                    <span class="value" id="title-color-val">#f5e6d3</span>
                </div>
                <div class="control-row">
                    <label>Text Shadow:</label>
                    <input type="text" id="title-shadow" value="2px 2px 4px rgba(0, 0, 0, 0.8)">
                </div>
            </div>

            <div class="control-section">
                <h3>Nav Signs</h3>
                <div class="control-row">
                    <label>Min Width:</label>
                    <input type="range" id="nav-width" min="100" max="200" value="160" step="5">
                    <span class="value" id="nav-width-val">160px</span>
                </div>
                <div class="control-row">
                    <label>Height:</label>
                    <input type="range" id="nav-height" min="80" max="180" value="140" step="5">
                    <span class="value" id="nav-height-val">140px</span>
                </div>
                <div class="control-row">
                    <label>Font Size:</label>
                    <input type="range" id="nav-font-size" min="14" max="36" value="27" step="1">
                    <span class="value" id="nav-font-size-val">27px</span>
                </div>
                <div class="control-row">
                    <label>Pad Top:</label>
                    <input type="range" id="nav-pad-top" min="0" max="60" value="30" step="1">
                    <span class="value" id="nav-pad-top-val">30px</span>
                </div>
                <div class="control-row">
                    <label>Text Color:</label>
                    <input type="color" id="nav-color" value="#4a3520">
                    <span class="value" id="nav-color-val">#4a3520</span>
                </div>
                <div class="control-row">
                    <label>Text Shadow:</label>
                    <input type="text" id="nav-shadow" value="1px 1px 0 rgba(255, 255, 255, 0.3)">
                </div>

                <div class="subsection">
                    <h4>Active State</h4>
                    <div class="control-row">
                        <label>Color:</label>
                        <input type="color" id="nav-active-color" value="#381b00">
                        <span class="value" id="nav-active-color-val">#381b00</span>
                    </div>
                    <div class="control-row">
                        <label>Text Shadow:</label>
                        <input type="text" id="nav-active-shadow" value="0 0 8px rgba(139, 90, 43, 0.5)">
                    </div>
                </div>
            </div>

            <div class="control-section">
                <h3>Actions</h3>
                <div class="quick-actions">
                    <button class="quick-btn" onclick="copyFromFantasy()">Copy from Fantasy</button>
                    <button class="quick-btn" onclick="resetToDefaults()">Reset Defaults</button>
                </div>
            </div>

            <div class="output">
                <h3>
                    CSS Output
                    <span style="font-size: 10px; color: #888;">Theme: <span id="currentTheme"></span></span>
                </h3>
                <pre id="cssOutput"></pre>
                <div class="btn-row">
                    <button class="copy-btn" onclick="copyCSS()">Copy Current</button>
                    <button class="export-btn" onclick="exportAllCSS()">Export All Themes</button>
                </div>
            </div>
        </div>

        <div class="preview-panel">
            <div class="preview-container">
                <div class="preview-header" id="previewHeader">
                    <div class="preview-header-image" id="previewHeaderImage">
                        <div class="preview-header-frame" id="previewHeaderFrame"></div>
                        <div class="preview-site-title" id="previewSiteTitle">
                            <a href="#">Dylan's Blog</a>
                        </div>
                    </div>
                </div>
                <div class="preview-nav" id="previewNav">
                    <div class="preview-nav-sign" onclick="toggleActive(this)"><span>Home</span></div>
                    <div class="preview-nav-sign active" onclick="toggleActive(this)"><span>Archive</span></div>
                    <div class="preview-nav-sign" onclick="toggleActive(this)"><span>Photos</span></div>
                    <div class="preview-nav-sign" onclick="toggleActive(this)"><span>About</span></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const themes = ['fantasy', 'sci-fi', 'cyberpunk', 'cabin', 'underwater', 'corporate'];

        // Theme-specific fonts
        const themeFonts = {
            fantasy: { title: '"Uncial Antiqua", cursive', nav: '"MedievalSharp", cursive' },
            'sci-fi': { title: '"Orbitron", sans-serif', nav: '"Share Tech Mono", monospace' },
            cyberpunk: { title: '"Teko", sans-serif', nav: '"Rajdhani", sans-serif' },
            cabin: { title: '"Amatic SC", cursive', nav: '"Cabin", sans-serif' },
            underwater: { title: '"Cinzel", serif', nav: '"Quicksand", sans-serif' },
            corporate: { title: '"Inter", sans-serif', nav: '"Inter", sans-serif' }
        };

        // Theme asset paths
        const themeAssets = {
            fantasy: {
                header: '/fantasy/headers/home.webp',
                headerNight: '/fantasy/headers/home_night.webp',
                frame: '/fantasy/headers/ornate frame.webp',
                sign: '/fantasy/menu/sign.webp'
            },
            'sci-fi': {
                header: '/sci-fi/headers/home.webp',
                headerNight: '/sci-fi/headers/home_night.webp',
                frame: '/sci-fi/headers/ornate frame.webp',
                sign: '/sci-fi/menu/sign.webp'
            },
            cyberpunk: {
                header: '/cyberpunk/headers/home.webp',
                headerNight: '/cyberpunk/headers/home_night.webp',
                frame: '/cyberpunk/headers/ornate frame.webp',
                sign: '/cyberpunk/menu/sign.webp'
            },
            cabin: {
                header: '/cabin/headers/home.webp',
                headerNight: '/cabin/headers/home_night.webp',
                frame: '/cabin/headers/ornate_frame.webp',
                sign: '/cabin/menu/sign.webp'
            },
            underwater: {
                header: '/underwater/headers/home.webp',
                headerNight: '/underwater/headers/home_night.webp',
                frame: '/underwater/headers/ornate_name.webp',
                sign: '/underwater/menu/sign.webp'
            },
            corporate: {
                header: '/corporate/headers/default.png',
                headerNight: '/corporate/headers/default.png',
                frame: '/corporate/headers/ornate frame.webp',
                sign: '/corporate/menu/sign.webp'
            }
        };

        // Default values per theme (matching current CSS)
        const themeDefaults = {
            fantasy: {
                header: { width: 100, height: 215, shadow: '0 4px 20px rgba(0, 0, 0, 0.3)' },
                title: { size: 37, bottom: 0, left: 65, color: '#f5e6d3', shadow: '2px 2px 4px rgba(0, 0, 0, 0.8)' },
                nav: { width: 160, height: 140, fontSize: 27, padTop: 30, color: '#4a3520', shadow: '1px 1px 0 rgba(255, 255, 255, 0.3)' },
                navActive: { color: '#381b00', shadow: '0 0 8px rgba(139, 90, 43, 0.5)' }
            },
            'sci-fi': {
                header: { width: 100, height: 215, shadow: '0 4px 20px rgba(0, 100, 200, 0.3)' },
                title: { size: 42, bottom: 30, left: 100, color: '#00d4ff', shadow: '0 0 10px rgba(0, 212, 255, 0.5)' },
                nav: { width: 160, height: 140, fontSize: 27, padTop: 23, color: '#1a3a5c', shadow: '0 0 4px rgba(0, 212, 255, 0.3)' },
                navActive: { color: '#00d4ff', shadow: '0 0 12px rgba(0, 212, 255, 0.7)' }
            },
            cyberpunk: {
                header: { width: 100, height: 215, shadow: '0 4px 20px rgba(255, 0, 255, 0.3)' },
                title: { size: 48, bottom: 100, left: 200, color: '#ff00ff', shadow: '0 0 10px #ff00ff, 2px 2px 0 #00ffff' },
                nav: { width: 160, height: 140, fontSize: 27, padTop: 30, color: '#000000', shadow: '0 0 4px rgba(255, 0, 255, 0.5)' },
                navActive: { color: '#ff00ff', shadow: '0 0 20px #ff00ff, 0 0 40px #ff00ff' }
            },
            cabin: {
                header: { width: 100, height: 215, shadow: '0 4px 20px rgba(90, 60, 30, 0.4)' },
                title: { size: 52, bottom: 30, left: 100, color: '#fff5e6', shadow: '2px 2px 4px rgba(60, 40, 20, 0.8)' },
                nav: { width: 160, height: 140, fontSize: 27, padTop: 30, color: '#5a3a2a', shadow: '1px 1px 0 rgba(255, 245, 230, 0.3)' },
                navActive: { color: '#2e260f', shadow: '0 0 5px #ff8c00, 0 0 10px #ff8c00' }
            },
            underwater: {
                header: { width: 100, height: 215, shadow: '0 4px 20px rgba(30, 80, 100, 0.4)' },
                title: { size: 42, bottom: 30, left: 100, color: '#c0e8e0', shadow: '2px 2px 4px rgba(20, 40, 50, 0.8)' },
                nav: { width: 160, height: 140, fontSize: 27, padTop: 30, color: '#3a5a4a', shadow: '1px 1px 0 rgba(192, 232, 224, 0.3)' },
                navActive: { color: '#c9a227', shadow: '1px 1px 0 #8b6914, -1px -1px 0 #e8d48b' }
            },
            corporate: {
                header: { width: 96, height: 200, shadow: '0 2px 8px rgba(0, 0, 0, 0.1)' },
                title: { size: 32, bottom: 20, left: 30, color: '#202124', shadow: 'none' },
                nav: { width: 160, height: 140, fontSize: 24, padTop: 30, color: '#202124', shadow: 'none' },
                navActive: { color: '#1a73e8', shadow: 'none' }
            }
        };

        // Current saved values
        const savedValues = {};
        themes.forEach(theme => {
            savedValues[theme] = JSON.parse(JSON.stringify(themeDefaults[theme]));
        });

        const themeSelect = document.getElementById('themeSelect');
        const modeSelect = document.getElementById('modeSelect');

        function getCurrentValues() {
            return savedValues[themeSelect.value];
        }

        function setCurrentValues(vals) {
            savedValues[themeSelect.value] = vals;
        }

        function loadControls() {
            const vals = getCurrentValues();

            document.getElementById('header-width').value = vals.header.width;
            document.getElementById('header-width-val').textContent = vals.header.width + '%';
            document.getElementById('header-height').value = vals.header.height;
            document.getElementById('header-height-val').textContent = vals.header.height + 'px';
            document.getElementById('header-shadow').value = vals.header.shadow;

            document.getElementById('title-size').value = vals.title.size;
            document.getElementById('title-size-val').textContent = vals.title.size + 'px';
            document.getElementById('title-bottom').value = vals.title.bottom;
            document.getElementById('title-bottom-val').textContent = vals.title.bottom + 'px';
            document.getElementById('title-left').value = vals.title.left;
            document.getElementById('title-left-val').textContent = vals.title.left + 'px';
            document.getElementById('title-color').value = vals.title.color;
            document.getElementById('title-color-val').textContent = vals.title.color;
            document.getElementById('title-shadow').value = vals.title.shadow;

            document.getElementById('nav-width').value = vals.nav.width;
            document.getElementById('nav-width-val').textContent = vals.nav.width + 'px';
            document.getElementById('nav-height').value = vals.nav.height;
            document.getElementById('nav-height-val').textContent = vals.nav.height + 'px';
            document.getElementById('nav-font-size').value = vals.nav.fontSize;
            document.getElementById('nav-font-size-val').textContent = vals.nav.fontSize + 'px';
            document.getElementById('nav-pad-top').value = vals.nav.padTop;
            document.getElementById('nav-pad-top-val').textContent = vals.nav.padTop + 'px';
            document.getElementById('nav-color').value = vals.nav.color;
            document.getElementById('nav-color-val').textContent = vals.nav.color;
            document.getElementById('nav-shadow').value = vals.nav.shadow;

            document.getElementById('nav-active-color').value = vals.navActive.color;
            document.getElementById('nav-active-color-val').textContent = vals.navActive.color;
            document.getElementById('nav-active-shadow').value = vals.navActive.shadow;
        }

        function saveControls() {
            const vals = {
                header: {
                    width: parseInt(document.getElementById('header-width').value),
                    height: parseInt(document.getElementById('header-height').value),
                    shadow: document.getElementById('header-shadow').value
                },
                title: {
                    size: parseInt(document.getElementById('title-size').value),
                    bottom: parseInt(document.getElementById('title-bottom').value),
                    left: parseInt(document.getElementById('title-left').value),
                    color: document.getElementById('title-color').value,
                    shadow: document.getElementById('title-shadow').value
                },
                nav: {
                    width: parseInt(document.getElementById('nav-width').value),
                    height: parseInt(document.getElementById('nav-height').value),
                    fontSize: parseInt(document.getElementById('nav-font-size').value),
                    padTop: parseInt(document.getElementById('nav-pad-top').value),
                    color: document.getElementById('nav-color').value,
                    shadow: document.getElementById('nav-shadow').value
                },
                navActive: {
                    color: document.getElementById('nav-active-color').value,
                    shadow: document.getElementById('nav-active-shadow').value
                }
            };
            setCurrentValues(vals);
        }

        function updatePreview() {
            const theme = themeSelect.value;
            const mode = modeSelect.value;
            const vals = getCurrentValues();
            const assets = themeAssets[theme];
            const fonts = themeFonts[theme];

            // Update header image
            const headerImg = document.getElementById('previewHeaderImage');
            const headerSrc = mode === 'night' ? assets.headerNight : assets.header;
            headerImg.style.backgroundImage = `url("${headerSrc}")`;
            headerImg.style.width = vals.header.width + '%';
            headerImg.style.height = vals.header.height + 'px';
            headerImg.style.boxShadow = vals.header.shadow;

            // Update header frame
            document.getElementById('previewHeaderFrame').style.backgroundImage = `url("${assets.frame}")`;

            // Update site title
            const titleEl = document.getElementById('previewSiteTitle');
            titleEl.style.fontSize = vals.title.size + 'px';
            titleEl.style.bottom = vals.title.bottom + 'px';
            titleEl.style.left = vals.title.left + 'px';
            titleEl.style.fontFamily = fonts.title;
            titleEl.querySelector('a').style.color = vals.title.color;
            titleEl.querySelector('a').style.textShadow = vals.title.shadow;

            // Update nav signs
            const navSigns = document.querySelectorAll('.preview-nav-sign');
            navSigns.forEach(sign => {
                sign.style.minWidth = vals.nav.width + 'px';
                sign.style.height = vals.nav.height + 'px';
                sign.style.backgroundImage = `url("${assets.sign}")`;

                const span = sign.querySelector('span');
                span.style.fontFamily = fonts.nav;
                span.style.fontSize = vals.nav.fontSize + 'px';
                span.style.paddingTop = vals.nav.padTop + 'px';

                if (sign.classList.contains('active')) {
                    span.style.color = vals.navActive.color;
                    span.style.textShadow = vals.navActive.shadow;
                } else {
                    span.style.color = vals.nav.color;
                    span.style.textShadow = vals.nav.shadow;
                }
            });

            // Update info
            document.getElementById('currentTheme').textContent = theme + (mode === 'night' ? ' (night)' : '');

            generateCSS();
        }

        function toggleActive(el) {
            el.classList.toggle('active');
            updatePreview();
        }

        function generateCSS() {
            const theme = themeSelect.value;
            const vals = getCurrentValues();

            const isDefault = theme === 'fantasy';
            const isCorp = theme === 'corporate';
            let prefix = isDefault ? '' : `html.theme-${theme} `;
            if (isCorp) prefix = 'html.easy-read ';

            let css = `/* ═══════════════════════════════════════════════════════════════\n`;
            css += `   THEME: ${theme.toUpperCase()} - HEADER STYLES\n`;
            css += `   ═══════════════════════════════════════════════════════════════ */\n\n`;

            // Header
            css += `${prefix}.header-image {\n`;
            if (vals.header.width !== 100) {
                css += `    width: ${vals.header.width}%;\n`;
            }
            css += `    height: ${vals.header.height}px;\n`;
            css += `    box-shadow: ${vals.header.shadow};\n`;
            css += `}\n\n`;

            // Site title
            css += `${prefix}.site-title {\n`;
            css += `    font-size: ${vals.title.size}px;\n`;
            css += `    bottom: ${vals.title.bottom}px;\n`;
            css += `    left: ${vals.title.left}px;\n`;
            css += `    color: ${vals.title.color};\n`;
            css += `    text-shadow: ${vals.title.shadow};\n`;
            css += `}\n\n`;

            // Nav signs
            css += `${prefix}.nav-sign {\n`;
            css += `    min-width: ${vals.nav.width}px;\n`;
            css += `    height: ${vals.nav.height}px;\n`;
            css += `}\n\n`;

            css += `${prefix}.nav-sign span {\n`;
            css += `    font-size: ${vals.nav.fontSize}px;\n`;
            css += `    color: ${vals.nav.color};\n`;
            css += `    text-shadow: ${vals.nav.shadow};\n`;
            css += `    padding-top: ${vals.nav.padTop}px;\n`;
            css += `}\n\n`;

            // Nav active
            css += `${prefix}.nav-sign.active span {\n`;
            css += `    color: ${vals.navActive.color};\n`;
            css += `    text-shadow: ${vals.navActive.shadow};\n`;
            css += `}\n`;

            document.getElementById('cssOutput').textContent = css;
        }

        function copyCSS() {
            navigator.clipboard.writeText(document.getElementById('cssOutput').textContent);
            alert('CSS copied!');
        }

        function exportAllCSS() {
            let allCSS = `/* ABOUTME: Theme-specific header styles generated by calibration tool */\n`;
            allCSS += `/* ABOUTME: Contains header heights, site title, and nav sign styles per theme */\n\n`;

            themes.forEach(theme => {
                const vals = savedValues[theme];
                const isDefault = theme === 'fantasy';
                const isCorp = theme === 'corporate';
                let prefix = isDefault ? '' : `html.theme-${theme} `;
                if (isCorp) prefix = 'html.easy-read ';

                allCSS += `/* ═══════════════════════════════════════════════════════════════\n`;
                allCSS += `   THEME: ${theme.toUpperCase()} - HEADER STYLES\n`;
                allCSS += `   ═══════════════════════════════════════════════════════════════ */\n\n`;

                // Header
                allCSS += `${prefix}.header-image {\n`;
                if (vals.header.width !== 100) {
                    allCSS += `    width: ${vals.header.width}%;\n`;
                }
                allCSS += `    height: ${vals.header.height}px;\n`;
                allCSS += `    box-shadow: ${vals.header.shadow};\n`;
                allCSS += `}\n\n`;

                // Site title
                allCSS += `${prefix}.site-title {\n`;
                allCSS += `    font-size: ${vals.title.size}px;\n`;
                allCSS += `    bottom: ${vals.title.bottom}px;\n`;
                allCSS += `    left: ${vals.title.left}px;\n`;
                allCSS += `    color: ${vals.title.color};\n`;
                allCSS += `    text-shadow: ${vals.title.shadow};\n`;
                allCSS += `}\n\n`;

                // Nav signs
                allCSS += `${prefix}.nav-sign {\n`;
                allCSS += `    min-width: ${vals.nav.width}px;\n`;
                allCSS += `    height: ${vals.nav.height}px;\n`;
                allCSS += `}\n\n`;

                allCSS += `${prefix}.nav-sign span {\n`;
                allCSS += `    font-size: ${vals.nav.fontSize}px;\n`;
                allCSS += `    color: ${vals.nav.color};\n`;
                allCSS += `    text-shadow: ${vals.nav.shadow};\n`;
                allCSS += `    padding-top: ${vals.nav.padTop}px;\n`;
                allCSS += `}\n\n`;

                // Nav active
                allCSS += `${prefix}.nav-sign.active span {\n`;
                allCSS += `    color: ${vals.navActive.color};\n`;
                allCSS += `    text-shadow: ${vals.navActive.shadow};\n`;
                allCSS += `}\n\n`;
            });

            navigator.clipboard.writeText(allCSS);
            alert('All theme CSS exported to clipboard!');
        }

        function copyFromFantasy() {
            const fantasyVals = JSON.parse(JSON.stringify(savedValues.fantasy));
            setCurrentValues(fantasyVals);
            loadControls();
            updatePreview();
        }

        function resetToDefaults() {
            const theme = themeSelect.value;
            savedValues[theme] = JSON.parse(JSON.stringify(themeDefaults[theme]));
            loadControls();
            updatePreview();
        }

        // Event listeners
        themeSelect.addEventListener('change', () => {
            loadControls();
            updatePreview();
        });

        modeSelect.addEventListener('change', updatePreview);

        // Range controls (px units)
        ['header-height', 'title-size', 'title-bottom', 'title-left', 'nav-width', 'nav-height', 'nav-font-size', 'nav-pad-top'].forEach(id => {
            document.getElementById(id).addEventListener('input', (e) => {
                document.getElementById(id + '-val').textContent = e.target.value + 'px';
                saveControls();
                updatePreview();
            });
        });

        // Range controls (% units)
        ['header-width'].forEach(id => {
            document.getElementById(id).addEventListener('input', (e) => {
                document.getElementById(id + '-val').textContent = e.target.value + '%';
                saveControls();
                updatePreview();
            });
        });

        // Color controls
        ['title-color', 'nav-color', 'nav-active-color'].forEach(id => {
            document.getElementById(id).addEventListener('input', (e) => {
                document.getElementById(id + '-val').textContent = e.target.value;
                saveControls();
                updatePreview();
            });
        });

        // Text controls
        ['header-shadow', 'title-shadow', 'nav-shadow', 'nav-active-shadow'].forEach(id => {
            document.getElementById(id).addEventListener('input', () => {
                saveControls();
                updatePreview();
            });
        });

        // Initialize
        loadControls();
        updatePreview();
    </script>
</body>
</html>
